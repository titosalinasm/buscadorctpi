<app-menu></app-menu>
<app-banner-principal></app-banner-principal>

<div class="container-fluid">

    <div class="row justify-content-around">
        <div class="ctn-steps step0  col-md-9">
          <div class="container">
            <br>
            <div class="row">
              <div class="col-sm mt-2 mb-3">
                <h3 >
                  <div >Búsqueda avanzada</div>
                </h3>
                <h5>Busque el conocimiento con datos más específicos, tales como:</h5>
              </div>
            </div>

            <div>
                <tabset>
                  <tab heading="Patentes"  (selectTab)="doShowTab(1)">
                    <div class="row">
                        <div class="col-sm mt-2 mb-3">
                          <div class="form-row margin_top_10">
                            <div class="form-group col-sm-6">
                                <h6>Nombre científico</h6>
                                <div>
                                  <p-autoComplete
                                    [(ngModel)]="vcRecursoPatenteSelect"
                                    [suggestions]="lstRecursoPatente"
                                    field="vcNombreCientifico"
                                    (completeMethod)="doSugerenciaPatentes($event)"
                                    [style]="{'width':'100%'}"
                                    [inputStyle]="{'width':'100%'}"
                                    [minLength]="3"
                                      styleClass="wid100"
                                      ></p-autoComplete>
                                </div>
                            </div>
                            <div class="form-group col-sm-6">
                                <h6>Actividad farmacológica</h6>
                                <p-multiSelect  defaultLabel="Seleccionar actividad" [options]="lstActividadPatentes" [(ngModel)]="lstActividadPatentesSelect" optionLabel="vcActividad" [style]="{'width':'100%'}" > </p-multiSelect>
                            </div>
                        </div>
                        <form [formGroup]="frmPatentes" autocomplete="off">
                        <div class="form-row margin_top_10">
                            <div class="form-group col-sm-6">
                                <h6>Título de patente</h6>
                                <input type="text" formControlName="vcTituloPatente"  class="form-control"  placeholder="Título de patente">
                            </div>
                            <div class="form-group col-sm-6">
                              <h6>Número de publicacion</h6>
                              <input type="text" formControlName="vcNumeroPublicacion"  class="form-control"   placeholder="Número de publicación">
                          </div>
                        </div>
                        <div class="form-row margin_top_10">
                          <div class="form-group col-sm-6">
                            <h6>CIP</h6>
                            <input type="text" formControlName="vcCip" class="form-control"   placeholder="Ejemplo: CIP">
                            </div>
                            <div class="form-group col-sm-6">
                                <h6>Reivindicacion</h6>
                                <input type="text" formControlName="vcReinvindicacion" class="form-control"   placeholder="Ejemplo: Reivindicacion">
                            </div>
                        </div>

                        <div class="form-row margin_top_10">
                          <div class="form-group col-sm-12">
                          <h6>Resumen</h6>
                          <input type="text" formControlName="vcResumen"  class="form-control"  placeholder="Descripción">
                          </div>
                        </div>
                      </form>
                      <button type="submit" (click)="doBuscarPatente()" class="btn btn-primary" style="float:right;">Buscar</button>
                      <button type="button"  class="btn btn-outline-danger" style="float:right;margin-right: 5px;">Limpiar
                      </button>
                    </div>
                    </div>


                  </tab>
                  <tab heading="Informacion documental" (selectTab)="doShowTab(2)">
                    <div class="row">
                        <div class="col-sm mt-2 mb-3">
                          <form [formGroup]="frmConocimientos1" autocomplete="off">
                          <div class="form-row margin_top_10">

                              <div class="form-group col-sm-12">
                                  <h6>Tipo de conocimiento</h6>
                                  <select class="custom-select" id="nu-id-clase"
                                  formControlName="nuIdTipoConocimiento">
                                  <option value="" disabled selected hidden>Seleccionar...</option>
                                  <option *ngFor="let item of lstTipoConocimiento; let row = index" [ngValue]="item.nuIdTipoConocimiento">
                                      {{item.vcIdTipoConocimiento}}</option>
                                  </select>
                              </div>
                          </div>
                        </form>
                            <div class="form-row margin_top_10">

                                <div class="form-group col-sm-6">
                                    <h6>Nombre científico</h6>
                                    <div>
                                      <p-autoComplete
                                        [(ngModel)]="vcRecursoConocimientoSelect"
                                        [suggestions]="lstRecursoConocimiento"
                                        field="vcNombreCientifico"
                                        (completeMethod)="doSugerenciaConocimiento($event)"
                                        [style]="{'width':'100%'}"
                                        [inputStyle]="{'width':'100%'}"
                                        [minLength]="3"
                                          styleClass="wid100"
                                          ></p-autoComplete>
                                    </div>
                                </div>
                                <div class="form-group col-sm-6">
                                  <h6>Actividad</h6>
                                <p-multiSelect  defaultLabel="Seleccionar actividad" [options]="lstActividadConocimiento" [(ngModel)]="lstActividadConocimientoSelect" optionLabel="vcActividad" [style]="{'width':'100%'}" > </p-multiSelect>
                                </div>
                            </div>
                            <form [formGroup]="frmConocimientos2" autocomplete="off">
                            <div class="form-row margin_top_10" *ngIf="frmConocimientos1.value.nuIdTipoConocimiento==1">
                                <div class="form-group col-sm-6">
                                  <h6>Nombre común</h6>
                                  <input type="text"  formControlName="vcNombreComun" class="form-control"  placeholder="Nombre común">
                                </div>

                                <div class="form-group col-sm-6">
                                  <h6>Tipo de bibliografia</h6>
                                  <select class="custom-select" id="nu-id-clase"
                                  formControlName="nuIdTipoBibliografia">
                                  <option value="" disabled selected hidden>Seleccionar...</option>
                                  <option *ngFor="let item of lstTipoBibliografia; let row = index" [ngValue]="item.nuIdTipoBibliografia">
                                      {{item.vcTipoBibliografia}}</option>
                                  </select>
                              </div>
                            </div>

                            <div class="form-row margin_top_10">
                              <div class="form-group col-sm-6" *ngIf="frmConocimientos1.value.nuIdTipoConocimiento==1">
                                <h6>Pueblo</h6>
                                <select class="custom-select" id="nu-id-clase"
                                formControlName="nuIdPueblo">
                                <option value="" disabled selected hidden>Seleccionar...</option>
                                <option *ngFor="let item of lstPueblo; let row = index" [ngValue]="item.nuIdPueblo">
                                    {{item.vcPueblo}}</option>
                                </select>
                              </div>
                              <div class="form-group col-sm-6">
                                <h6>Descripcion del conocimiento</h6>
                                    <input type="text" formControlName="vcDescripcion" class="form-control"  placeholder="Resumen">
                            </div>
                              </div>
                              </form>
                              <button type="submit"  (click)="doBuscarConocimiento()" class="btn btn-primary" style="float:right;">Buscar</button>
                              <button type="button"  class="btn btn-outline-danger" style="float:right;margin-right: 5px;">Limpiar
                              </button>
                          </div>
                        </div>


                  </tab>
                  <tab heading="Todas las coleciones" (selectTab)="doShowTab(3)">
                    <div class="row">
                      <div class="col-sm mt-2 mb-3">
                        <div class="form-row">
                          <div class="form-group col-sm-6">
                            <label>Nombre científico</label>
                            <div>
                              <p-autoComplete
                                        [(ngModel)]="vcRecursoAvanzadoSelect"
                                        [suggestions]="lstRecursoAvanzado"
                                        field="vcNombreCientifico"
                                        (completeMethod)="doSugerenciaAvanzado($event)"
                                        [style]="{'width':'100%'}"
                                        [inputStyle]="{'width':'100%'}"
                                        [minLength]="3"
                                          styleClass="wid100"
                                          ></p-autoComplete>
                            </div>
                            <small class="form-text text-muted">Se búscará en todas las colecciones.</small>
                          </div>
                          <div class="form-group col-sm-6">
                            <label>Actividad farmacológica</label>
                            <p-multiSelect  defaultLabel="Seleccionar actividad" [options]="lstActividadAvanzado" [(ngModel)]="lstActividadAvanzadoSelect" optionLabel="vcActividad" [style]="{'width':'100%'}" > </p-multiSelect>
                          </div>

                          <form [formGroup]="frmAgregarDatosLogicos" autocomplete="off" style="width: 100%;">
                          <div class="form-group col-sm-12" *ngIf="blInputShow1">
                              <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                                  <div class="form-row">
                                    <div class="form-group  col-sm-10">
                                      <input  class="form-control" formControlName="valor1"  placeholder="Ingrese dato">
                                    </div>
                                    <div class="form-group col-sm-2">
                                      <div class="btn-group" role="group" style="float: right;">
                                        <label class="btn btn-outline-primary"
                                        [style.background-color]="blRadioButton1=='AND'?'#007bff':''"
                                        [style.color]="blRadioButton1=='AND'?'#ffffff':''"
                                        (click)="doBlInput1('AND')"
                                        >Y</label>
                                        <label class="btn btn-outline-primary"
                                        [style.background-color]="blRadioButton1=='OR'?'#007bff':''"
                                        [style.color]="blRadioButton1=='OR'?'#ffffff':''"
                                        (click)="doBlInput1('OR')"
                                        >O</label>

                                        <label class="btn btn-outline-danger"
                                        style="margin-left: 20px;"
                                        (click)="doAgregar2()"
                                        *ngIf="!blInputShow2"
                                        >+</label>
                                      </div>
                                      </div>
                                  </div>
                          </div>
                          <div class="form-group col-sm-12" *ngIf="blInputShow2">
                            <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                                <div class="form-row">
                                  <div class="form-group  col-sm-10">
                                    <input  class="form-control" formControlName="valor2"   placeholder="Ingrese dato">
                                  </div>
                                  <div class="form-group col-sm-2">
                                    <div class="btn-group" role="group" style="float: right;">
                                      <label class="btn btn-outline-primary"
                                      [style.background-color]="blRadioButton2=='AND'?'#007bff':''"
                                      [style.color]="blRadioButton2=='AND'?'#ffffff':''"
                                      (click)="doBlInput2('AND')"
                                      >Y</label>
                                      <label class="btn btn-outline-primary"
                                      [style.background-color]="blRadioButton2=='OR'?'#007bff':''"
                                      [style.color]="blRadioButton2=='OR'?'#ffffff':''"
                                      (click)="doBlInput2('OR')"
                                      >O</label>

                                      <label class="btn btn-outline-danger"
                                      style="margin-left: 20px;"
                                      (click)="doAgregar3()"
                                      *ngIf="!blInputShow3"
                                      >+</label>
                                    </div>
                                    </div>
                                </div>
                        </div>
                        <div class="form-group col-sm-12" *ngIf="blInputShow3">
                          <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                              <div class="form-row">
                                <div class="form-group  col-sm-10">
                                  <input  class="form-control"  formControlName="valor3"  placeholder="Ingrese dato">
                                </div>
                                <div class="form-group col-sm-2">
                                  <div class="btn-group" role="group" style="float: right;">
                                    <label class="btn btn-outline-primary"
                                    [style.background-color]="blRadioButton3=='AND'?'#007bff':''"
                                    [style.color]="blRadioButton3=='AND'?'#ffffff':''"
                                    (click)="doBlInput3('AND')"
                                    >Y</label>
                                    <label class="btn btn-outline-primary"
                                    [style.background-color]="blRadioButton3=='OR'?'#007bff':''"
                                    [style.color]="blRadioButton3=='OR'?'#ffffff':''"
                                    (click)="doBlInput3('OR')"
                                    >O</label>

                                    <label class="btn btn-outline-danger"
                                    style="margin-left: 20px;"
                                    (click)="doAgregar4()"
                                    *ngIf="!blInputShow4"
                                    >+</label>
                                  </div>
                                  </div>
                              </div>
                      </div>
                      <div class="form-group col-sm-12" *ngIf="blInputShow4">
                        <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                            <div class="form-row">
                              <div class="form-group  col-sm-10">
                                <input  class="form-control" formControlName="valor4"   placeholder="Ingrese dato">
                              </div>
                              <div class="form-group col-sm-2">
                                <div class="btn-group" role="group" style="float: right;">
                                  <label class="btn btn-outline-primary"
                                  [style.background-color]="blRadioButton4=='AND'?'#007bff':''"
                                  [style.color]="blRadioButton4=='AND'?'#ffffff':''"
                                  (click)="doBlInput4('AND')"
                                  >Y</label>
                                  <label class="btn btn-outline-primary"
                                  [style.background-color]="blRadioButton4=='OR'?'#007bff':''"
                                  [style.color]="blRadioButton4=='OR'?'#ffffff':''"
                                  (click)="doBlInput4('OR')"
                                  >O</label>

                                  <label class="btn btn-outline-danger"
                                  style="margin-left: 20px;"
                                  (click)="doAgregar5()"
                                  *ngIf="!blInputShow5"
                                  >+</label>
                                </div>
                                </div>
                            </div>
                    </div>

                    <div class="form-group col-sm-12" *ngIf="blInputShow5">
                      <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                          <div class="form-row">
                            <div class="form-group  col-sm-10">
                              <input  class="form-control" formControlName="valor5"   placeholder="Ingrese dato">
                            </div>
                            <div class="form-group col-sm-2">
                              <div class="btn-group" role="group" style="float: right;">
                                <label class="btn btn-outline-primary"
                                [style.background-color]="blRadioButton5=='AND'?'#007bff':''"
                                [style.color]="blRadioButton5=='AND'?'#ffffff':''"
                                (click)="doBlInput5('AND')"
                                >Y</label>
                                <label class="btn btn-outline-primary"
                                [style.background-color]="blRadioButton5=='OR'?'#007bff':''"
                                [style.color]="blRadioButton5=='OR'?'#ffffff':''"
                                (click)="doBlInput5('OR')"
                                >O</label>

                                <label class="btn btn-outline-danger"
                                style="margin-left: 20px;"
                                (click)="doAgregar6()"
                                *ngIf="!blInputShow6"
                                >+</label>
                              </div>
                              </div>
                          </div>
                  </div>
                  <div class="form-group col-sm-12" *ngIf="blInputShow6">
                    <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                        <div class="form-row">
                          <div class="form-group  col-sm-10">
                            <input  class="form-control" formControlName="valor6"   placeholder="Ingrese dato">
                          </div>
                          <div class="form-group col-sm-2">
                            <div class="btn-group" role="group" style="float: right;">
                              <label class="btn btn-outline-primary"
                              [style.background-color]="blRadioButton6=='AND'?'#007bff':''"
                              [style.color]="blRadioButton6=='AND'?'#ffffff':''"
                              (click)="doBlInput6('AND')"
                              >Y</label>
                              <label class="btn btn-outline-primary"
                              [style.background-color]="blRadioButton6=='OR'?'#007bff':''"
                              [style.color]="blRadioButton6=='OR'?'#ffffff':''"
                              (click)="doBlInput6('OR')"
                              >O</label>

                              <label class="btn btn-outline-danger"
                              style="margin-left: 20px;"
                              (click)="doAgregar7()"
                              *ngIf="!blInputShow7"
                              >+</label>
                            </div>
                            </div>
                        </div>
                </div>
                <div class="form-group col-sm-12" *ngIf="blInputShow7">
                  <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                      <div class="form-row">
                        <div class="form-group  col-sm-10">
                          <input  class="form-control" formControlName="valor7"   placeholder="Ingrese dato">
                        </div>
                        <div class="form-group col-sm-2">
                          <div class="btn-group" role="group" style="float: right;">
                            <label class="btn btn-outline-primary"
                            [style.background-color]="blRadioButton7=='AND'?'#007bff':''"
                            [style.color]="blRadioButton7=='AND'?'#ffffff':''"
                            (click)="doBlInput7('AND')"
                            >Y</label>
                            <label class="btn btn-outline-primary"
                            [style.background-color]="blRadioButton7=='OR'?'#007bff':''"
                            [style.color]="blRadioButton7=='OR'?'#ffffff':''"
                            (click)="doBlInput7('OR')"
                            >O</label>

                            <label class="btn btn-outline-danger"
                            style="margin-left: 20px;"
                            (click)="doAgregar8()"
                            *ngIf="!blInputShow8"
                            >+</label>
                          </div>
                          </div>
                      </div>
              </div>
              <div class="form-group col-sm-12" *ngIf="blInputShow8">
                <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                    <div class="form-row">
                      <div class="form-group  col-sm-10">
                        <input  class="form-control" formControlName="valor8"   placeholder="Ingrese dato">
                      </div>
                      <div class="form-group col-sm-2">
                        <div class="btn-group" role="group" style="float: right;">
                          <label class="btn btn-outline-primary"
                          [style.background-color]="blRadioButton8=='AND'?'#007bff':''"
                          [style.color]="blRadioButton8=='AND'?'#ffffff':''"
                          (click)="doBlInput8('AND')"
                          >Y</label>
                          <label class="btn btn-outline-primary"
                          [style.background-color]="blRadioButton8=='OR'?'#007bff':''"
                          [style.color]="blRadioButton8=='OR'?'#ffffff':''"
                          (click)="doBlInput8('OR')"
                          >O</label>

                          <label class="btn btn-outline-danger"
                          style="margin-left: 20px;"
                          (click)="doAgregar9()"
                          *ngIf="!blInputShow9"
                          >+</label>
                        </div>
                        </div>
                    </div>
            </div>
            <div class="form-group col-sm-12" *ngIf="blInputShow9">
              <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                  <div class="form-row">
                    <div class="form-group  col-sm-10">
                      <input  class="form-control" formControlName="valor9"  placeholder="Ingrese dato">
                    </div>
                    <div class="form-group col-sm-2">
                      <div class="btn-group" role="group" style="float: right;">
                        <label class="btn btn-outline-primary"
                        [style.background-color]="blRadioButton9=='AND'?'#007bff':''"
                        [style.color]="blRadioButton9=='AND'?'#ffffff':''"
                        (click)="doBlInput9('AND')"
                        >Y</label>
                        <label class="btn btn-outline-primary"
                        [style.background-color]="blRadioButton9=='OR'?'#007bff':''"
                        [style.color]="blRadioButton9=='OR'?'#ffffff':''"
                        (click)="doBlInput9('OR')"
                        >O</label>

                        <label class="btn btn-outline-danger"
                        style="margin-left: 20px;"
                        (click)="doAgregar10()"
                        *ngIf="!blInputShow10"
                        >+</label>
                      </div>
                      </div>
                  </div>
          </div>
          <div class="form-group col-sm-12" *ngIf="blInputShow10">
            <label>Descripción/Resumen/Reivindicaciones/Título/Nombre común</label>
                <div class="form-row">
                  <div class="form-group  col-sm-10">
                    <input  class="form-control" formControlName="valor10"  placeholder="Ingrese dato">
                  </div>
                  <div class="form-group col-sm-2">
                    <div class="btn-group" role="group" style="float: right;">
                      <label class="btn btn-outline-primary"
                      [style.background-color]="blRadioButton10=='AND'?'#007bff':''"
                      [style.color]="blRadioButton10=='AND'?'#ffffff':''"
                      (click)="doBlInput10('AND')"
                      >Y</label>
                      <label class="btn btn-outline-primary"
                      [style.background-color]="blRadioButton10=='OR'?'#007bff':''"
                      [style.color]="blRadioButton10=='OR'?'#ffffff':''"
                      (click)="doBlInput10('OR')"
                      >O</label>

                      <label class="btn btn-outline-danger"
                      style="margin-left: 20px; display: none;"
                      >+</label>
                    </div>
                    </div>
                </div>
        </div>
      </form>
                        </div>
                        <button type="submit" (click)="doBuscarAvanzada()" class="btn btn-primary" style="float:right;">Buscar</button>
                        <button type="button"  class="btn btn-outline-danger" style="float:right;margin-right: 5px;">Limpiar
                        </button>
                      </div>
                    </div>

                    <div>

                    </div>
                  </tab>
                </tabset>
              </div>
              </div>
          </div>
          </div>
    </div>
    <!-- Tablas de busquedas Patentes -->
    <div class="container-fluid" *ngIf="isShowTablePatentes">
      <!-- Seccion de busqueda -->
      <ng-container >
        <!-- Mensaje -->
        <div class="row">
          <div class="col-sm font-mr">
            <div *ngIf="lstResultadoPatente?.length < 200; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock>Se encontraron {{lstResultadoPatente?.length}} resultados.</ng-template>
            <ng-template #elseBlock>
              <small class="text-muted">Se encontraron {{lstResultadoPatente?.length}} resultados.</small>
            </ng-template>
          </div>
        </div>
        <!-- Mensaje -->

        <!-- Acciones -->

        <div class="row text-right">
          <div class="col-sm-12">
            <div *ngIf="lstResultadoPatente?.length > 0; then thenBlock_a else elseBlock_a"></div>
            <ng-template #thenBlock_a>
              <p>
                <button type="button" class="btn btn-light" style="margin-right: 3px;" (click)="exportAvanzadoPatente()"
                tooltip="Exportar a excel">
                <span style="font-size: 1em; color: green">
                  <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                </span>
              </button>
                <button type="button" class="btn btn-light" style="margin-right: 3px;" (click)="imprimir()"
                  tooltip="Imprimir búsqueda">
                  <span style="font-size: 1em; color: green">
                    <i class="fa fa-print"></i>
                  </span>
                </button>
                <button type="button" class="btn btn-light" (click)="showAllPatente()" tooltip="Expandir/Contraer">
                  <span style="font-size: 1em; color: green;">

                    <i class="fa fa-expand" *ngIf="!isShowAllPatentes"></i>
                    <i class="fa fa-compress" *ngIf="isShowAllPatentes"></i>
                  </span>
                </button>
              </p>
            </ng-template>
            <ng-template #elseBlock_a>
            </ng-template>
          </div>
        </div>

        <!-- Acciones -->

        <!-- Tabla de busqueda -->
        <div class="row">
          <div class="col-sm-12">
              <div *ngIf="lstResultadoPatente?.length > 0; then thenBlock_b else elseBlock_b"></div>
              <ng-template #thenBlock_b>
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr class="font-mb">
                    <th>#</th>
                    <th>Fuente</th>
                    <th>Recurso(s)</th>
                    <th>Actividad</th>
                    <th>Título original</th>
                    <th>Nro. Publicación</th>
                    <th>Fecha Publicación</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody *ngFor="let item of lstResultadoPatente; let row = index" id="{{row}}">
                  <tr (click)="showOnePatente(row)" class="row-hover">
                    <th>{{row + 1}}</th>
                    <td><b>{{item.vcFuente}}</b></td>
                    <td><div [innerHTML]="item.vcRecurso"></div></td>
                    <td>{{item.vcActividad}}</td>
                    <td>{{item.vcTituloOriginal}}</td>
                    <td>{{item.vcNroPublicacion}}</td>
                    <td>{{item.vcFechaPublicacion}}</td>
                    <td><button class="btn" (click)="doVerDetalle(item.nuIdTipoRegistro, item.nuIdRegistro, md_patentes, md_conocimiento)"
                      ><i class="fa fa-arrows-alt"></i></button></td>
                    <td>
                        <div *ngIf="row==idShowPatentes || isShowAllPatentes; else showIconDown">
                          <i class="fa fa-chevron-up"></i>
                        </div>
                        <ng-template #showIconDown>
                          <i class="fa fa-chevron-down"></i>
                        </ng-template>
                    </td>
                  </tr>
                  <tr *ngIf="row==idShowPatentes || isShowAllPatentes">
                    <td *ngIf="item.nuIdTipoRegistro==1"><b>Resumen: </b></td>
                    <td *ngIf="item.nuIdTipoRegistro==2"><b>Descripción: </b></td>
                    <td colspan="8">
                      <div [innerHTML]="item.vcResumen"></div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </ng-template>
          <ng-template #elseBlock_b>
          </ng-template>
          </div>
        </div>
        <!-- Tabla de busqueda -->

      </ng-container>
      <!-- Seccion de busqueda -->
    </div>

   <!-- Tablas de busquedas conocimientos -->
   <div class="container-fluid" *ngIf="isShowTableConocimiento">
    <!-- Seccion de busqueda -->
    <ng-container >
      <!-- Mensaje -->
      <div class="row">
        <div class="col-sm font-mr">
          <div *ngIf="lstResultadoConocimiento?.length < 200; then thenBlock else elseBlock"></div>
          <ng-template #thenBlock>Se encontraron {{lstResultadoConocimiento?.length}} resultados.</ng-template>
          <ng-template #elseBlock>
            <small class="text-muted">Se encontraron {{lstResultadoConocimiento?.length}} resultados.</small>
          </ng-template>
        </div>
      </div>
      <!-- Mensaje -->

      <!-- Acciones -->

      <div class="row text-right">
        <div class="col-sm-12">
          <div *ngIf="lstResultadoConocimiento?.length > 0; then thenBlock_a else elseBlock_a"></div>
          <ng-template #thenBlock_a>
            <p>
              <button type="button" class="btn btn-light" style="margin-right: 3px;" (click)="exportAvanzadoConocimiento()"
              tooltip="Exportar a excel">
              <span style="font-size: 1em; color: green">
                <i class="fa fa-file-excel-o" aria-hidden="true"></i>
              </span>
            </button>
              <button type="button" class="btn btn-light" style="margin-right: 3px;" (click)="imprimir()"
                tooltip="Imprimir búsqueda">
                <span style="font-size: 1em; color: green">
                  <i class="fa fa-print"></i>
                </span>
              </button>
              <button type="button" class="btn btn-light" (click)="showAllConocimiento()" tooltip="Expandir/Contraer">
                <span style="font-size: 1em; color: green;">

                  <i class="fa fa-expand" *ngIf="!isShowAllConocimiento"></i>
                  <i class="fa fa-compress" *ngIf="isShowAllConocimiento"></i>
                </span>
              </button>
            </p>
          </ng-template>
          <ng-template #elseBlock_a>
          </ng-template>
        </div>
      </div>

      <!-- Acciones -->

      <!-- Tabla de busqueda -->
      <div class="row">
        <div class="col-sm-12">
            <div *ngIf="lstResultadoConocimiento?.length > 0; then thenBlock_b else elseBlock_b"></div>
            <ng-template #thenBlock_b>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr class="font-mb">
                  <th>#</th>
                  <th>Fuente</th>
                  <th>Recurso</th>
                  <th>Actividad</th>
                  <th>Autor</th>
                  <th>Lugar de publicación</th>
                  <th>Fecha de publicacón</th>
                  <th>Título</th>
                  <th>Tipo de bibliografía</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody *ngFor="let item of lstResultadoConocimiento; let row = index" id="{{row}}">
                <tr (click)="showOneConocimiento(row)" class="row-hover">
                  <th>{{row + 1}}</th>
                  <td><b>{{item.vcFuente}}</b></td>
                  <td><div [innerHTML]="item.vcRecurso"></div></td>
                  <td>{{item.vcActividad}}</td>
                  <td>{{item.vcAutor}}</td>
                  <td>{{item.vcLugarPublicacion}}</td>
                  <td>{{item.vcFechaPublicacionConocimiento}}</td>
                  <td>{{item.vcTituloArticulo}}</td>
                  <td>{{item.vcTipoBibliografia}}</td>
                  <td><button class="btn" (click)="doVerDetalle(item.nuIdTipoRegistro, item.nuIdRegistro, md_patentes, md_conocimiento)"
                    ><i class="fa fa-arrows-alt"></i></button></td>
                  <td>
                      <div *ngIf="row==idShowConocimiento|| isShowAllConocimiento; else showIconDown">
                        <i class="fa fa-chevron-up"></i>
                      </div>
                      <ng-template #showIconDown>
                        <i class="fa fa-chevron-down"></i>
                      </ng-template>
                  </td>
                </tr>
                <tr *ngIf="row==idShowConocimiento || isShowAllConocimiento">
                  <td *ngIf="item.nuIdTipoRegistro==1"><b>Resumen: </b></td>
                  <td *ngIf="item.nuIdTipoRegistro==2"><b>Descripción: </b></td>
                  <td colspan="8">
                    <div [innerHTML]="item.vcResumen"></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-template>
        <ng-template #elseBlock_b>
        </ng-template>
        </div>
      </div>
      <!-- Tabla de busqueda -->

    </ng-container>
    <!-- Seccion de busqueda -->
  </div>

     <!-- Tablas de busquedas avanzado -->
     <div class="container-fluid" *ngIf="isShowTableAvanzado">
      <!-- Seccion de busqueda -->
      <ng-container >
        <!-- Mensaje -->
        <div class="row">
          <div class="col-sm font-mr">
            <div *ngIf="lstResultadoAvanzado?.length < 200; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock>Se encontraron {{lstResultadoAvanzado?.length}} resultados.</ng-template>
            <ng-template #elseBlock>
              <small class="text-muted">Se encontraron {{lstResultadoAvanzado?.length}} resultados.</small>
            </ng-template>
          </div>
        </div>
        <!-- Mensaje -->

        <!-- Acciones -->

        <div class="row text-right">
          <div class="col-sm-12">
            <div *ngIf="lstResultadoAvanzado?.length > 0; then thenBlock_a else elseBlock_a"></div>
            <ng-template #thenBlock_a>
              <p>
                <button type="button" class="btn btn-light" style="margin-right: 3px;" (click)="exportAvanzadoTodos()"
                tooltip="Exportar a excel">
                <span style="font-size: 1em; color: green">
                  <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                </span>
              </button>
                <button type="button" class="btn btn-light" style="margin-right: 3px;" (click)="imprimir()"
                  tooltip="Imprimir búsqueda">
                  <span style="font-size: 1em; color: green">
                    <i class="fa fa-print"></i>
                  </span>
                </button>
                <button type="button" class="btn btn-light" (click)="showAllAvanzado()" tooltip="Expandir/Contraer">
                  <span style="font-size: 1em; color: green;">

                    <i class="fa fa-expand" *ngIf="!isShowAllAvanzado"></i>
                    <i class="fa fa-compress" *ngIf="isShowAllAvanzado"></i>
                  </span>
                </button>
              </p>
            </ng-template>
            <ng-template #elseBlock_a>
            </ng-template>
          </div>
        </div>

        <!-- Acciones -->

        <!-- Tabla de busqueda -->
        <div class="row">
          <div class="col-sm-12">
              <div *ngIf="lstResultadoAvanzado?.length > 0; then thenBlock_b else elseBlock_b"></div>
              <ng-template #thenBlock_b>
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr class="font-mb">
                    <th>#</th>
                    <th>Fuente</th>
                    <th>Recurso</th>
                    <th>Actividad</th>
                    <th>Solicitante</th>
                    <th>Nro. Registro</th>
                    <th>Fecha Publicación</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody *ngFor="let item of lstResultadoAvanzado; let row = index" id="{{row}}">
                  <tr (click)="showOneAvanzado(row)" class="row-hover">
                    <th>{{row + 1}}</th>
                    <td><b>{{item.vcFuente}}</b></td>
                    <td><div [innerHTML]="item.vcRecurso"></div></td>
                    <td>{{item.vcActividad}}</td>
                    <td>{{item.vcColumna3}}</td>
                    <td>{{item.vcNumero}}</td>
                    <td>{{item.vcFecha}}</td>
                    <td><button class="btn" (click)="doVerDetalle(item.nuIdTipoRegistro, item.nuIdRegistro, md_patentes, md_conocimiento)"
                      ><i class="fa fa-arrows-alt"></i></button></td>
                    <td>
                        <div *ngIf="row==idShowAvanzado|| isShowAllAvanzado; else showIconDown">
                          <i class="fa fa-chevron-up"></i>
                        </div>
                        <ng-template #showIconDown>
                          <i class="fa fa-chevron-down"></i>
                        </ng-template>
                    </td>
                  </tr>
                  <tr *ngIf="row==idShowAvanzado || isShowAllAvanzado">
                    <td *ngIf="item.nuIdTipoRegistro==1"><b>Resumen: </b></td>
                    <td *ngIf="item.nuIdTipoRegistro==2"><b>Descripción: </b></td>
                    <td colspan="8">
                      <div [innerHTML]="item.vcResumen"></div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </ng-template>
          <ng-template #elseBlock_b>
          </ng-template>
          </div>
        </div>
        <!-- Tabla de busqueda -->

      </ng-container>
      <!-- Seccion de busqueda -->
    </div>

    <ng-template #md_patentes>
      <div class="modal-header">

        <form class="form-inline">
          <div class="form-group mb-2">
            <button (click)="doMostrarPatenteFlag()" style="float:right;margin-bottom: 5px;" type="button" class="btn btn-outline-primary pull-right"><i class="fa fa-arrows-alt"></i></button>
            <h4> PATENTES</h4>
          </div>
        </form>

        <!-- <div class="form-row">
          <div class="form-group col-sm-12" style="margin-bottom: 0px;">
            <button (click)="doMostrarPatenteFlag()" style="float:right;margin-bottom: 5px;" type="button" class="btn btn-outline-primary pull-right"><i class="fa fa-arrows-alt"></i></button>
            <h4>PATENTES</h4>
          </div>
        </div> -->
        <!-- <h4 class="modal-title pull-left">Patente</h4> -->
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="print">


      <p-accordion>
        <p-accordionTab header="Datos de la patente" [(selected)]="activeStatePatente[0]">
          <div class="form-row margin_top_10">
            <!-- <div class="form-group col-sm-12">
              <h6>Solicitante</h6>
              <div class="box_brown">
                Maritsabel Antonio
              </div>
            </div> -->
            <div class="form-group col-sm-6">
              <h6>Título (Español)</h6>
              <div class="box_brown">
               {{objPatentes?.lstDatosPatentes[0]?.vcTituloOriginal}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>Título (Inglés)</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcTituloIngles}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>Número de publicación</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcPubNumber}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>Fecha de públicacion</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcPubDate}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>Reivindicacion</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcIndependentClaims}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>CIP</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcIpc4}}
              </div>
            </div>

            <div class="form-group col-sm-4">
              <h6>Pub. Country Code</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcPubCountryCode}}
              </div>
            </div>
            <div class="form-group col-sm-4">
              <h6>Pub. Year</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcPubYear}}
              </div>
            </div>
            <div class="form-group col-sm-4">
              <h6>App. Date</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcAppDate}}
              </div>
            </div>
            <div class="form-group col-sm-12">
              <h6>Ventaja técnica</h6>
              <div class="box_brown">
                {{objPatentes?.lstDatosPatentes[0]?.vcVentajaTecnica}}
              </div>
            </div>
            <div class="form-group col-sm-12">
              <h6>Resumen en español</h6>
              <div class="box_brown">
                <p class="mb-0"> {{objPatentes?.lstDatosPatentes[0]?.vcAbstracEspanol}}</p>
              </div>
            </div>
            <div class="form-group col-sm-12">
              <h6>Resumen en inglés</h6>

              <div class="box_brown">
                <p class="mb-0">{{objPatentes?.lstDatosPatentes[0]?.vcAbstracIngles}}</p>
              </div>
            </div>
          </div>
        </p-accordionTab>

        <p-accordionTab header="Recursos Biológicos" [(selected)]="activeStatePatente[1]">
          <div class="form-row margin_top_10">
            <div class="form-group col-sm-3">
              <h6>Nro.</h6>
              <div class="box_brown">
               1
              </div>
            </div>
            <div class="form-group col-sm-9">
              <h6>Nombre cientifico.</h6>
              <div class="box_brown">
               {{objPatentes?.lstDatosPatentes[0]?.vcNombreCientifico}}
              </div>
            </div>
          </div>
        </p-accordionTab>

        <p-accordionTab header="Actividad Farmacológica" [(selected)]="activeStatePatente[2]">
          <div class="form-row margin_top_10">
            <div class="form-group col-sm-3">
              <h6>Nro.</h6>
            </div>
            <div class="form-group col-sm-9">
              <h6>Nombre cientifico.</h6>
            </div>
          </div>
          <div class="form-row margin_top_10" *ngFor="let item of objPatentes?.lstActividadRelacionada; let row=index;">
            <div class="form-group col-sm-3">
              <div class="box_brown">
               {{row+1}}
              </div>
            </div>
            <div class="form-group col-sm-9">
              <div class="box_brown">
               {{item.vcActividad}}
              </div>
            </div>
          </div>
        </p-accordionTab>
    </p-accordion>
      </div>
    </ng-template>

    <ng-template #md_conocimiento>
      <div class="modal-header">
        <!-- <div class="form-row">
          <div class="form-group col-sm-12" style="margin-bottom: 0px;">
            <button (click)="doMostrarConocimientoFlag()" style="float:right;margin-bottom: 5px;" type="button" class="btn btn-outline-primary pull-right"><i class="fa fa-arrows-alt"></i></button>
            CONOCIMIENTO
          </div>
        </div> -->
        <form class="form-inline">
          <div class="form-group mb-2">
            <button (click)="doMostrarConocimientoFlag()" style="float:right;margin-bottom: 5px;" type="button" class="btn btn-outline-primary pull-right"><i class="fa fa-arrows-alt"></i></button>
            <h4> CONOCIMIENTO</h4>
          </div>
        </form>
        <!-- <h4 class="modal-title pull-left">Conocimiento</h4> -->
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <p-accordion>
        <p-accordionTab header="Recursos naturales" [(selected)]="activeStateConocimiento[0]">
          <div class="form-row margin_top_10 row_table_bottom">
            <div class="form-group col-sm-2">
              <h6>Nro.</h6>
            </div>
            <div class="form-group col-sm-4">
              <h6>Nombre cientifico</h6>
            </div>
            <div class="form-group col-sm-3">
              <h6>Nombre común</h6>
            </div>
            <div class="form-group col-sm-3">
              <h6>Familia</h6>
            </div>
          </div>
          <div class="form-row margin_top_10 row_table_bottom" *ngFor="let item of objConocimiento?.lstRecursoRelacionado; let row=index;">
            <div class="form-group col-sm-2">
              <div >
               {{row+1}}
              </div>
            </div>
            <div class="form-group col-sm-4">
              <div >
               {{item.vcNombreCientifico}}
              </div>
            </div>
            <div class="form-group col-sm-3">
              <div >
               {{item.vcNombreComun}}
              </div>
            </div>
            <div class="form-group col-sm-3">
              <div >
               {{item.vcNombreFamilia}}
              </div>
            </div>
          </div>
        </p-accordionTab>

        <p-accordionTab header="Descripción" [(selected)]="activeStateConocimiento[1]">
          <div class="form-row margin_top_10">
            <div class="form-group col-sm-12">
              <h6>Descripcion en español</h6>
              <div class="box_brown">
                {{objConocimiento?.lstDescripcion[0]?.vcNombresEspanol}}
              </div>
            </div>
            <div class="form-group col-sm-12">
              <h6>Descripcion en ingles</h6>
              <div class="box_brown">
                {{objConocimiento?.lstDescripcion[0]?.vcNombresIngles}}
              </div>
            </div>
          </div>
        </p-accordionTab>

        <p-accordionTab header="Actividad farmacologica" [(selected)]="activeStateConocimiento[2]">
          <div class="form-row margin_top_10 row_table_bottom">
            <div class="form-group col-sm-2">
              <h6>Nro.</h6>
            </div>
            <div class="form-group col-sm-10">
              <h6>Nombre cientifico.</h6>
            </div>
          </div>
          <div class="form-row margin_top_10 row_table_bottom" *ngFor="let item of objConocimiento?.lstActividadRelacionada; let row=index;">
            <div class="form-group col-sm-2">
              <div>
               {{row+1}}
              </div>
            </div>
            <div class="form-group col-sm-10">
              <div >
               {{item.vcActividad}}
              </div>
            </div>
          </div>
        </p-accordionTab>
        <p-accordionTab header="Bibliografía" [(selected)]="activeStateConocimiento[3]">
          <div class="form-row margin_top_10">
            <div class="form-group col-sm-12">
              <h6>Autor</h6>
              <div class="box_brown">
                {{objConocimiento?.lstBibliografia[0]?.vcAutor}}
              </div>
            </div>
            <div class="form-group col-sm-12">
              <h6>Fuente</h6>
              <div class="box_brown">
                {{objConocimiento?.lstBibliografia[0]?.vcNombreFuente}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>Editorial</h6>
              <div class="box_brown">
                {{objConocimiento?.lstBibliografia[0]?.vcEditorial}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>Fecha de publicación</h6>
              <div class="box_brown">
                {{objConocimiento?.lstBibliografia[0]?.vcFechaPublicacion}}
              </div>
            </div>
            <div class="form-group col-sm-12">
              <h6>Lugar de publicación</h6>
              <div class="box_brown">
                {{objConocimiento?.lstBibliografia[0]?.vcLugarPublicacion}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <h6>Página citada</h6>
              <div class="box_brown">
                {{objConocimiento?.lstBibliografia[0]?.vcPaginaCitada}}
              </div>
            </div>
          </div>
        </p-accordionTab>
        <p-accordionTab header="Archivos" [(selected)]="activeStateConocimiento[4]">
          <div class="form-row margin_top_10 row_table_bottom">
            <div class="form-group col-sm-2">
              <h6>Nro.</h6>
            </div>
            <div class="form-group col-sm-6">
              <h6>Nombre de archivo</h6>
            </div>
            <div class="form-group col-sm-2">
              <h6>Tamaño (Kb)</h6>
            </div>
            <div class="form-group col-sm-2">
              <h6>Acción</h6>
            </div>
          </div>
          <div class="form-row margin_top_10 row_table_bottom" *ngFor="let item of objConocimiento?.lstArchivo; let row=index;">
            <div class="form-group col-sm-2">
              <div>
               {{row+1}}
              </div>
            </div>
            <div class="form-group col-sm-6">
              <div >
               {{item.vcNombreOrigial}}
              </div>
            </div>
            <div class="form-group col-sm-2">
              <div >
               {{item.nuLong}}
              </div>
            </div>
            <div class="form-group col-sm-2">
              <div >
                <button type="button" class="btn btn-outline-primary"
                style="margin-bottom: 5px;"><i class="fa fa-cloud-download"></i></button>
              </div>
            </div>
          </div>
        </p-accordionTab>
      </p-accordion>
      </div>
    </ng-template>
